<!DOCTYPE html>
<html lang="en">
<head>
    <title>Apache Thrift JavaScript Browser Client Demo</title>
    <script src="thrift.js" type="text/javascript"></script>
    <script src="gen-js/HelloSvc.js" type="text/javascript"></script>
    <script src="gen-js/TimesTwo.js" type="text/javascript"></script>
</head>
<body>
    <button id="btn">Get Message from Node Server</button>
    <button id="btnDbl">Double 25</button>
    <script type="text/javascript">
        document.getElementById("btn").addEventListener("click", getMessage, false);
        function getMessage() {
            var transport = new Thrift.TXHRTransport("http://localhost:8585/hello");
            var protocol  = new Thrift.TJSONProtocol(transport);
            var client = new HelloSvcClient(protocol);
            var msg = client.hello_func();
            document.getElementById("output").innerHTML = msg;
        }
        document.getElementById("btnDbl").addEventListener("click", dblMessage, false);
        function dblMessage() {
            var transport = new Thrift.TXHRTransport("http://localhost:8585/dbl");
            var protocol  = new Thrift.TJSONProtocol(transport);
            var client = new TimesTwoClient(protocol);
            var val = client.dbl(25);
            document.getElementById("output2").innerHTML = val;
        }
    </script>
    <h2>Server Response: <div id="output"></div></h2>
    <h2>Server Dbl: <div id="output2"></div></h2>
</body>
</html>